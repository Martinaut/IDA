package core_rules.operation_display

// ------------------------------------ IMPORT --------------------------------------
import at.jku.dke.ida.shared.Event
import at.jku.dke.ida.shared.models.NonComparativeAnalysisSituation
import at.jku.dke.ida.shared.operations.Operation
import at.jku.dke.ida.rules.interfaces.OperationDisplayServiceModel

// ------------------------------ FILTER OPERATIONS --------------------------------
rule "'Add Filter' - if at least one filter is available"
    agenda-group "operation-display-determination"
when
    $model : OperationDisplayServiceModel(areNotSelectedFilterConditionsAvailable())
then
    insert(new Operation(Event.NAVIGATE_FILTER_NARROW, 60));
end

//rule "'Narrow Filter' - if "
//    agenda-group "operation-display-determination"
//    enabled false
//when
//then
//end

rule "'Drop Filter' - if at least one filter is selected"
    agenda-group "operation-display-determination"
when
    $as : NonComparativeAnalysisSituation(filterConditions.isEmpty() == false)
    $model : OperationDisplayServiceModel(analysisSituation == $as)
then
    insert(new Operation(Event.NAVIGATE_FILTER_BROADEN, 62));
end

//rule "'Broaden Filter' - if "
//    agenda-group "operation-display-determination"
//    enabled false
//when
//then
//end

rule "'Refocus Filter' - if at least one filter is selected and one available"
    agenda-group "operation-display-determination"
    enabled false
when
    $as : NonComparativeAnalysisSituation(filterConditions.isEmpty() == false)
    $model : OperationDisplayServiceModel(areNotSelectedFilterConditionsAvailable(), analysisSituation == $as)
then
    insert(new Operation(Event.NAVIGATE_FILTER_REFOCUS, 61));
end